<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Your Page</title>
</head>
<body>
    <div th:insert="~{fragments/fragments.html :: bar}">Bar</div>
    <div style="margin: 50px 100px; display: inline-flex" th:object="${owner}">
        <div style="display: inline-block; margin-right: 500px">
            <h1><span style="font-weight: normal" th:text="*{username}"/></h1>
            <h2><img style="border-radius: 10%; width: 300px" th:src="*{image}" alt="image"></h2>
            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <h3 style="color: grey">Role: <span style="font-weight: normal" th:text="*{role.name}"/></h3>
                <h2>First Name: <span th:text="*{firstname}" style="font-weight: normal"/></h2>
                <h2>Last Name: <span th:text="*{lastname}" style="font-weight: normal"/></h2>
                <h2>Email: <span style="font-weight: normal" th:text="*{email}"/></h2>
            </th:block>
            <input type="button" value="Back" onclick="history.back()" style="color: black; margin-top: 100px">
        </div>
        <div style="display: inline-block">
            <h3>Description</h3>
            <p th:text="*{description}" style="text-align: justify">Description</p>

            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <div style="border-top: 1px solid gray; margin-top: 50px"></div>
                <div style="margin-top: 50px">
                    <th:block th:if="${owner.username eq guest.username}">
                        <h2>
                            <a th:href="@{/users/{name}/cars (name = *{username})}" style="text-decoration: none">My Cars</a>
                        </h2>
                    </th:block>
                    <th:block th:if="${owner.username != guest.username}">
                        <h2>
                            <a th:href="@{/users/{name}/cars (name = *{username})}" style="text-decoration: none">Cars</a>
                        </h2>
                    </th:block>
                </div>
            </th:block>
            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <th:block th:if="${owner.cars.size() < 1}">
                    <h3 style="color: grey">No results</h3>
                </th:block>
                <div th:each="car : ${owner.cars}" style="display: inline-flex">
                    <h3 style="height: 100px; width: 100px; margin-right: 20px">
                        <a th:href="@{/cars/{id} (id = ${car.id})}" style="text-decoration: none">
                            <img th:src="${car.image}" alt="image" style="display: inline-flex; width: 100px; border-radius: 10%"><br>
                            <div style="color: grey; font-size: 14px" th:text="${car.brand.title}"/>
                            <div style="font-size: 18px" th:text="${car.title}"/>
                        </a>
                    </h3>
                </div>
            </th:block>
            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <th:block th:if="${owner.username eq guest.username}">
                    <div style="margin-top: 50px">
                        <input type="button" value="Add" onclick="location.assign('/cars/add')" style="color: black">
                    </div>
                </th:block>
            </th:block>

            <div style="border-top: 1px solid gray; margin-top: 50px"></div>

            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <h2 style="margin-top: 50px">Complectations</h2>
                <th:block th:if="${owner.equipments.size() < 1}">
                    <h3 style="color: grey">No results</h3>
                </th:block>
                <div th:each="complectation : ${owner.equipments}" style="display: inline-flex">
                    <h3 style="margin-right: 20px; text-align: center">
                        <a th:href="@{/equipments/{id} (id = ${complectation.id})}" style="text-decoration: none">
                            <img th:src="${complectation.image}" alt="image" style="display: inline-flex; width: 50px; border-radius: 10%"><br>
                            <div th:text="${complectation.name}"/>
                            <th:block th:if="${complectation.attached == true}">
                                <span style="font-size: 12px; color: grey">Attached</span><br>
                                <span th:text="|${complectation.car.brand.title} ${complectation.car.title}|" style="font-size: 12px"/>
                            </th:block>
                        </a>
                    </h3>
                </div>
                <th:block th:if="${owner.username eq guest.username}">
                    <div style="margin-top: 50px">
                        <input type="button" value="Add" onclick="location.assign('/equipments/add')" style="color: black">
                    </div>
                </th:block>
            </th:block>
        </div>
    </div>
</body>
</html>