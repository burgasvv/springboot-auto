<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Your Page</title>
</head>
<body>
    <div th:insert="~{fragments/fragments.html :: bar}">Bar</div>
    <div style="margin: 50px 100px; display: inline-flex" th:object="${owner}">
        <div style="display: inline-block; margin-right: 500px">
            <h1><span style="font-weight: normal" th:text="*{getUsername}"/></h1>
            <h2><img style="border-radius: 10%; width: 300px" th:src="*{image}" alt="image"></h2>
            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <h3 style="color: grey">Role: <span style="font-weight: normal" th:text="*{roles.first}"/></h3>
                <h2>First Name: <span th:text="*{firstname}" style="font-weight: normal"/></h2>
                <h2>Last Name: <span th:text="*{lastname}" style="font-weight: normal"/></h2>
                <h2>Email: <span style="font-weight: normal" th:text="*{email}"/></h2>
            </th:block>
            <input type="button" value="Back" onclick="history.back()" style="color: black; margin-top: 100px">
        </div>
        <div style="display: inline-block; margin-top: 100px">
            <h3>Description</h3>
            <p th:text="*{description}" style="text-align: justify">Description</p>
            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <div style="margin-top: 100px">
                    <th:block th:if="${owner.username eq guest.username}">
                        <h2>
                            <a th:href="@{/users/{name}/cars (name = *{username})}" style="text-decoration: none">My Cars</a>
                        </h2>
                    </th:block>
                    <th:block th:if="${owner.username != guest.username}">
                        <h2>
                            <a th:href="@{/users/{name}/cars (name = *{username})}" style="text-decoration: none">Cars</a>
                        </h2>
                    </th:block>
                </div>
            </th:block>
            <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                <th:block th:if="${owner.cars.size() < 1}">
                    <h2>No results</h2>
                </th:block>
                <div th:each="car : ${owner.cars}" style="display: inline-flex">
                    <h3 style="height: 100px; width: 100px; margin-right: 20px">
                        <a th:href="@{/cars/{id} (id = ${car.id})}" style="text-decoration: none">
                            <img th:src="${car.image}" alt="image" style="display: inline-flex; width: 100px; border-radius: 10%"><br>
                            <div th:text="${car.brand.title}" style="margin-left: 20px"/>
                            <div th:text="${car.title}" style="margin-left: 20px"/>
                        </a>
                    </h3>
                </div>
            </th:block>
            <div>
                <div style="margin-top: 100px">
                    <th:block th:if="${#authorization.expression('isAuthenticated()')}">
                        <th:block th:if="${owner.username eq guest.username}">
                            <input type="button" value="Add Car" onclick="location.assign('/cars/add')" style="color: black">
                        </th:block>
                    </th:block>
                </div>
            </div>
        </div>
    </div>
</body>
</html>